# 后端任务清单

## 基本信息

- **任务创建时间**：2025-11-12 14:30:00
- **前端变更描述**：根据API文档对接前后端接口
- **优先级**：高
- **预计工作量**：1人/天

## API变更详情

### 1. 用户资料接口路径

- **请求方式**：GET/PUT
- **接口路径**：`/api/user/profile`
- **变更类型**：修改
- **接口描述**：后端API文档中描述了用户资料接口路径为`/api/user/profile`，但当前前端代码中使用的是`/api/user/info`，需要后端确认正确的API路径。

### 2. 用户头像上传接口

- **请求方式**：POST
- **接口路径**：`/api/upload/image`
- **变更类型**：修改
- **接口描述**：后端API文档中描述头像上传使用通用图片上传接口，并通过type参数指定类型，但当前前端代码使用的是专门的头像上传接口`/api/user/avatar`，需要后端统一为通用上传接口。

### 3. 问诊会话创建接口参数

- **请求方式**：POST
- **接口路径**：`/api/consult/sessions`
- **变更类型**：修改
- **接口描述**：后端API文档中创建问诊会话需要的参数是title和description，但当前前端代码使用的是symptoms和duration，需要后端确认正确的参数名称。

#### 请求参数

| 参数名 | 类型 | 是否必须 | 描述 | 示例值 |
|-------|------|---------|------|--------|
| title | string | 是 | 问诊标题 | "咨询感冒症状" |
| description | string | 是 | 问诊描述 | "最近有咳嗽症状，想咨询一下" |

### 4. 语音问诊接口

- **请求方式**：POST
- **接口路径**：`/api/consult/sessions/<session_id>/audio`
- **变更类型**：修改
- **接口描述**：后端API文档中描述了专门的语音问诊接口，但当前前端代码使用的是`/api/consult/speech-to-text`，需要后端确认正确的API路径。

### 5. 健康问答接口

- **请求方式**：POST
- **接口路径**：`/api/health/qa`
- **变更类型**：修改
- **接口描述**：后端API文档中描述了健康问答接口，但当前前端代码使用的是`/api/consult/medical-qa`，需要后端统一API路径。

#### 请求参数

| 参数名 | 类型 | 是否必须 | 描述 | 示例值 |
|-------|------|---------|------|--------|
| query | string | 是 | 健康问题 | "高血压患者应该注意什么？" |
| language | string | 否 | 语言 | "chinese" |

## 其他建议

1. 后端API响应格式应统一按照API文档中描述的格式：
   ```json
   {
     "code": 200,
     "message": "success",
     "data": {},
     "timestamp": 1746897859261
   }
   ```

2. 错误处理应统一使用API文档中描述的状态码：
   - 200: 成功
   - 400: 请求参数错误
   - 401: 未授权（需要登录）
   - 403: 权限不足
   - 404: 资源不存在
   - 500: 服务器内部错误

3. 建议后端检查当前实现的所有API接口路径和参数，确保与API文档保持一致。 