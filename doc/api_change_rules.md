# 前端变更生成后端任务清单规则

## 概述

本文档定义了当前端项目发生变更时，自动生成后端服务任务清单的规则。这些规则旨在确保前后端协作顺畅，减少沟通成本，提高开发效率。

## 任务清单格式

每次前端变更涉及后端接口时，将在 `doc/backend_tasks/` 目录下生成一个新的任务清单文件，命名格式为：`task_YYYYMMDD_HHMMSS.md`。

## 任务清单内容结构

```markdown
# 后端任务清单

## 基本信息

- **任务创建时间**：YYYY-MM-DD HH:MM:SS
- **前端变更描述**：[简要描述前端变更的内容]
- **优先级**：[高/中/低]
- **预计工作量**：[人/天]

## API变更详情

### 1. [API名称]

- **请求方式**：[GET/POST/PUT/DELETE]
- **接口路径**：[/api/path/to/resource]
- **变更类型**：[新增/修改/删除]
- **接口描述**：[描述此接口的功能和用途]

#### 请求参数

| 参数名 | 类型 | 是否必须 | 描述 | 示例值 |
|-------|------|---------|------|--------|
| param1 | string | 是 | 参数1描述 | example1 |
| param2 | integer | 否 | 参数2描述 | 123 |

#### 响应参数

| 参数名 | 类型 | 描述 | 示例值 |
|-------|------|------|--------|
| code | integer | 状态码 | 200 |
| message | string | 状态描述 | "success" |
| data | object | 返回数据 | {} |

#### 响应示例

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "name": "示例数据"
  }
}
```

### 2. [API名称2]

...
```

## 任务清单生成规则

1. **接口变更识别**：
   - 前端组件、页面中新增或修改的API调用
   - 删除的API调用
   - 请求或响应参数结构变更

2. **变更信息提取**：
   - 从前端代码中提取API路径、请求方法、参数等信息
   - 从TypeScript类型定义或JSDoc注释中提取接口数据结构

3. **任务优先级确定**：
   - 影响核心功能的API变更：高优先级
   - 影响非核心功能的API变更：中优先级
   - 优化类API变更：低优先级

4. **工作量估算**：
   - 新增复杂接口：2-3人/天
   - 新增简单接口：0.5-1人/天
   - 修改现有接口：0.5人/天
   - 删除接口：0.2人/天

## 后端开发规范建议

1. **接口实现**：
   - 严格按照任务清单中的接口规范实现
   - 保持请求和响应参数的一致性
   - 添加适当的参数验证和错误处理

2. **接口文档**：
   - 实现完成后，更新后端API文档
   - 标注API版本和变更历史

3. **测试用例**：
   - 为每个API编写单元测试
   - 提供接口测试示例（如Postman集合）

## 前后端联调

1. **Mock数据**：
   - 后端开发期间，前端可使用任务清单中的响应示例作为Mock数据
   - 后端提供临时Mock API

2. **联调环境**：
   - 使用开发环境进行前后端联调
   - 解决跨域、认证等环境问题

3. **问题反馈**：
   - 记录联调过程中的问题和解决方案
   - 更新任务清单，添加备注说明

## 变更管理

1. **版本控制**：
   - 任务清单文件纳入版本控制
   - 保留历史变更记录

2. **任务追踪**：
   - 在任务管理工具中创建对应任务
   - 关联代码提交和任务清单

3. **完成确认**：
   - 后端完成任务后，在任务清单中标记完成状态
   - 前端验证API实现是否符合预期 